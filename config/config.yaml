# -----------------------------------------------------------------------------
#                     Global (repository-level) Hydra config
# -----------------------------------------------------------------------------

# The *run* will be merged in at runtime by src.main/src.train.
run: null          # to be overridden: run=<run_id>
run_id: null       # to be set by run-specific YAML
method: null       # to be set by run-specific YAML (proposed/comparative)
mode: full         # trial | full
results_dir: ./results

wandb:
  entity: gengaru617-personal
  project: 2025-1108-1
  mode: online            # may be overwritten to "disabled" in trial mode

optuna:
  n_trials: 0
  direction: maximize
  search_space:
    adapter_lr_init: null
    graff_outer_lr: null
    controller_lr: null
    lora_r: null

# Dummy defaults â€“ will be overwritten by run-specific YAML.
model:
  name: null
  dtype: null
  lora:
    r: null
    alpha: null
    dropout: null
  parameter_count: null

dataset:
  name: null
  train_split: null
  eval_split: null
  max_tokens: null
  streaming: null
  shuffle_buffer: null

training:
  budget_minutes: null
  global_batch_size: null
  micro_batch_size: null
  gradient_accumulation_steps: null
  total_steps: null
  mixed_precision: null
  gradient_checkpointing: null
  clip_grad_norm: null
  optimizer:
    type: null
    lr_init: null
    betas: null
    weight_decay: null
  scheduler:
    type: null
    outer_lr: null
    controller_lr: null
    stability_guard: null
    warm_start_ckpt: null

evaluation:
  interval_steps: 100
  metrics: null

hydra:
  run:
    dir: .                # keep cwd unchanged so that relative paths are stable
